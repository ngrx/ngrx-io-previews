9b143b77 derive `State` properly
